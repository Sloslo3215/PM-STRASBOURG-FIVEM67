<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Archives des Bulletins</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #eef2f3; }
    .bulletin { background: white; margin-bottom: 15px; padding: 15px; border-left: 5px solid #007BFF; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    h2 { margin: 0; }
    .details { margin-top: 10px; }
  </style>
</head>
<body>

<h1>📂 Archives des Bulletins</h1>
<div id="archives"></div>

<script>
  const rawURL = "https://raw.githubusercontent.com/TON_UTILISATEUR/TON_DEPOT/main/bulletins.json"; // URL RAW du fichier JSON

  async function chargerArchives() {
    try {
      const res = await fetch(rawURL);
      const data = await res.json();
      data.sort((a, b) => b.timestamp - a.timestamp);

      const archivesDiv = document.getElementById("archives");
      if (data.length === 0) {
        archivesDiv.innerHTML = "<p>Aucun bulletin enregistré.</p>";
      } else {
        data.forEach(b => {
          const div = document.createElement('div');
          div.className = 'bulletin';
          div.innerHTML = `
            <h2>${b.titre} <small style="float:right;">👤 ${b.identifiant}</small></h2>
            <p>📅 Du ${b.debutService} au ${b.finService}</p>
            <p>🕓 Enregistré le : ${b.date}</p>
            <div class="details">📝 ${b.contenu.replace(/\n/g, "<br>")}</div>
          `;
          archivesDiv.appendChild(div);
        });
      }
    } catch (error) {
      document.getElementById("archives").innerHTML = "Erreur de chargement des bulletins.";
    }
  }

  chargerArchives();
</script>

</body>
</html>
